<!doctype html>
<html>
<style>
    img {
        width: 300px;
    }
</style>

<body>
    <img src="../../data/test_flower.png" id="source_img">
    <canvas id="target_img1"></canvas>
    <canvas id="target_img2"></canvas>
    <canvas id="target_img3"></canvas>
    <script src="../../../flycv.js" type="text/javascript"></script>
    <script type="text/javascript">
        fcv.then((fcv) => {
            let src_rgba = fcv.imread("source_img");
            let src_bgr = new fcv.Mat();
            let dst_gray1 = new fcv.Mat();
            let dst_rgba1 = new fcv.Mat();
            let dst_gray2 = new fcv.Mat();
            let dst_rgba2 = new fcv.Mat();
            let dst_gray3 = new fcv.Mat();
            let dst_rgba3 = new fcv.Mat();

            fcv.cvtColor(src_rgba, src_bgr, fcv.ColorConvertType.CVT_PA_RGBA2PA_BGR);
            fcv.extractChannel(src_bgr, dst_gray1, 0);
            fcv.extractChannel(src_bgr, dst_gray2, 1);
            fcv.extractChannel(src_bgr, dst_gray3, 2);
            fcv.cvtColor(dst_gray1, dst_rgba1, fcv.ColorConvertType.CVT_GRAY2PA_RGBA);
            fcv.cvtColor(dst_gray2, dst_rgba2, fcv.ColorConvertType.CVT_GRAY2PA_RGBA);
            fcv.cvtColor(dst_gray3, dst_rgba3, fcv.ColorConvertType.CVT_GRAY2PA_RGBA);

            fcv.imshow("target_img1", dst_rgba1);
            fcv.imshow("target_img2", dst_rgba2);
            fcv.imshow("target_img3", dst_rgba3);

            src_rgba.delete();
            src_bgr.delete();
            dst_gray1.delete();
            dst_rgba1.delete();
            dst_gray2.delete();
            dst_rgba2.delete();
            dst_gray3.delete();
            dst_rgba3.delete();
        });
    </script>
</body>

</html>
<!doctype html>
<html>
<body>
    <img src="../../data/test_flower.png" id="source_img" width="300">
    <canvas id="target_img1"></canvas>
    <canvas id="target_img2"></canvas>
    <canvas id="target_img3"></canvas>
    <script src="../../../flycv.js" type="text/javascript"></script>
    <script type="text/javascript">
        fcv.then((fcv) => {
            let srcRgba = fcv.imread("source_img");
            let srcBgr = new fcv.Mat();
            let dstGray1 = new fcv.Mat();
            let dstRgba1 = new fcv.Mat();
            let dstGray2 = new fcv.Mat();
            let dstRgba2 = new fcv.Mat();
            let dstGray3 = new fcv.Mat();
            let dstRgba3 = new fcv.Mat();

            fcv.cvtColor(srcRgba, srcBgr, fcv.ColorConvertType.CVT_PA_RGBA2PA_BGR);
            fcv.extractChannel(srcBgr, dstGray1, 0);
            fcv.extractChannel(srcBgr, dstGray2, 1);
            fcv.extractChannel(srcBgr, dstGray3, 2);
            fcv.cvtColor(dstGray1, dstRgba1, fcv.ColorConvertType.CVT_GRAY2PA_RGBA);
            fcv.cvtColor(dstGray2, dstRgba2, fcv.ColorConvertType.CVT_GRAY2PA_RGBA);
            fcv.cvtColor(dstGray3, dstRgba3, fcv.ColorConvertType.CVT_GRAY2PA_RGBA);

            fcv.imshow("target_img1", dstRgba1);
            fcv.imshow("target_img2", dstRgba2);
            fcv.imshow("target_img3", dstRgba3);

            srcRgba.delete();
            srcBgr.delete();
            dstGray1.delete();
            dstRgba1.delete();
            dstGray2.delete();
            dstRgba2.delete();
            dstGray3.delete();
            dstRgba3.delete();
        });
    </script>
</body>
</html>
<!doctype html>
<html>
<style>
    img {
        width: 300px;
    }
</style>

<body>
    <img src="../../data/test_sunrise.jpg" id="source_img">
    <canvas id="target_img"></canvas>
    <script src="../../../flycv.js" type="text/javascript"></script>
    <script type="text/javascript">
        fcv.then((fcv) => {
            let src_rgba = fcv.imread("source_img");
            let src_rgb = new fcv.Mat();
            let dst = new fcv.Mat();
            let center = new fcv.Point2f(100, 200);
            let scalar = [255, 255, 255, 255];
            let matrix = fcv.getRotationMatrix2D(center, 30, 1.0);

            fcv.cvtColor(src_rgba, src_rgb, fcv.ColorConvertType.CVT_PA_RGBA2PA_RGB);
            fcv.warpAffine(src_rgb, dst, matrix, fcv.InterpolationType.INTER_LINEAR,
                    fcv.BorderType.BORDER_CONSTANT, scalar);

            console.log(dst.type());

            fcv.imshow("target_img", dst);

            src_rgba.delete();
            src_rgb.delete();
            dst.delete();
            center.delete();
            matrix.delete();
        });
    </script>
</body>

</html>